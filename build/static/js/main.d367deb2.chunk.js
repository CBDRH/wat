(this.webpackJsonpwat=this.webpackJsonpwat||[]).push([[0],{20:function(e){e.exports=JSON.parse('{"buttons":[{"key":1,"category":"person","color":"#4A148C"},{"key":2,"category":"address","color":"#1A5276"},{"key":3,"category":"phone","color":"#B7950B"},{"key":4,"category":"idn","color":"#0E6655"},{"key":5,"category":"dob","color":"#943126"}]}')},26:function(e,t,n){e.exports=n(41)},33:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(19),o=n.n(a),r=n(24),l=n(11),c=n(12),i=n(5),u=n(17),d=n(14),s=n(0),m=n.n(s),h=n(8),v=n.n(h),g=(n(32),n(33),n(25)),y=n(21),p=n(9),b=n(22),C=n(16),f=n(7),E=n(18),O=n(20),k=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={},a.handleHover=a.handleHover.bind(Object(i.a)(a)),a.handleHoverOut=a.handleHoverOut.bind(Object(i.a)(a)),a.createButton=a.createButton.bind(Object(i.a)(a)),a}return Object(c.a)(n,[{key:"handleHover",value:function(e){var t=e.target.style.backgroundColor;this.setState((function(e){return{hovercolor:t}})),e.target.style.backgroundColor="rgba(117, 190, 218, 0.4)"}},{key:"handleHoverOut",value:function(e){e.target.style.backgroundColor=this.state.hovercolor,this.setState((function(e){return{hovercolor:""}}))}},{key:"createButton",value:function(e){var t={backgroundColor:e.color,marginTop:"15px"};return m.a.createElement(f.a,{key:e.key,value:e.category,className:"wat-button",style:t,onMouseOver:this.handleHover,onMouseOut:this.handleHoverOut},e.category.toUpperCase())}},{key:"render",value:function(){var e=this;return m.a.createElement("div",null,m.a.createElement(C.a,{className:"wat-buttongroup",vertical:!0,type:"radio",name:"categories",onChange:this.props.handleCatChange},this.props.data.buttons.map((function(t){return e.createButton(t)}))))}}]),n}(m.a.Component),w=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={file_name:"",selectedCat:"",categoryColor:"",hovercolor:"",btndata:O,bioText:""},n.readFiles=n.readFiles.bind(Object(i.a)(n)),n.onLoadFile=n.onLoadFile.bind(Object(i.a)(n)),n.handleCatChange=n.handleCatChange.bind(Object(i.a)(n)),n.annotate=n.annotate.bind(Object(i.a)(n)),n.getSelectedCategory=n.getSelectedCategory.bind(Object(i.a)(n)),n.createCatButtons=n.createCatButtons.bind(Object(i.a)(n)),n.createButton=n.createButton.bind(Object(i.a)(n)),n.handleHover=n.handleHover.bind(Object(i.a)(n)),n.handleHoverOut=n.handleHoverOut.bind(Object(i.a)(n)),n.queryCatColor=n.queryCatColor.bind(Object(i.a)(n)),n.convertToBIO=n.convertToBIO.bind(Object(i.a)(n)),n.deleteTag=n.deleteTag.bind(Object(i.a)(n)),n.copyToClipBoard=n.copyToClipBoard.bind(Object(i.a)(n)),n}return Object(c.a)(a,[{key:"readFiles",value:function(e){e.preventDefault();var t=e.target.files[0],n=new FileReader;n.onload=this.onLoadFile,n.onloadend=this.onLoadFileEnd,n.readAsText(t),this.setState((function(e){return{file_name:t.name}}))}},{key:"onLoadFile",value:function(e){var t=e.target.result;document.getElementById("wat-content").innerHTML=t,document.getElementById("wat-content").onmouseup=this.annotate,this.convertToBIO()}},{key:"onLoadFileEnd",value:function(e){for(var t=document.getElementsByClassName("wat-ent-entity"),n=0;n<t.length;n++)t[n].addEventListener("mouseup",(function(e){var t=e.currentTarget,n=t.parentNode;n.insertBefore(document.createTextNode(t.children[0].innerHTML),t),n.removeChild(t),e.stopPropagation();var a=document.getElementById("wat-content").innerHTML,o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:a})};fetch("http://127.0.0.1:5000/converttobio",o).then((function(e){return e.json()})).then((function(e){var t=e.result.map((function(e){return"\n"===e.token?"":e.token+" "+e.tag}));document.getElementById("bio-content").innerHTML=t.join("<br />")}))}))}},{key:"deleteTag",value:function(e){var t=e.currentTarget,n=t.parentNode;n.insertBefore(document.createTextNode(t.children[0].innerHTML),t),n.removeChild(t),e.stopPropagation(),this.convertToBIO()}},{key:"annotate",value:function(e){var t,n,a=this.getSelectedCategory();if(""===a)return window.getSelection().empty(),void alert("Please select one PHI category.");if(window.getSelection){var o=(t=window.getSelection()).toString();if(0!==o.length&&t.rangeCount){for(var r=document.createElement("div"),l=0,c=t.rangeCount;l<c;++l)r.appendChild(t.getRangeAt(l).cloneContents());if(r.innerHTML.includes("<span class="))return void window.getSelection().empty();n=t.getRangeAt(0);var i=document.createElement("span");i.onmouseup=this.deleteTag,i.className="wat-ent-entity",i.style.borderColor=this.state.categoryColor;var u=document.createElement("span");u.className="wat-ent-words",u.style.color=this.state.categoryColor,u.appendChild(document.createTextNode(o)),i.appendChild(u);var d=document.createElement("span");d.className="wat-ent-ner",d.style.backgroundColor=this.state.categoryColor,d.appendChild(document.createTextNode(a.toUpperCase())),i.appendChild(d),n.deleteContents(),n.insertNode(i),window.getSelection().empty(),this.convertToBIO()}}else if(document.selection&&document.selection.createRange)return void window.getSelection().empty()}},{key:"getSelectedCategory",value:function(){return this.state.selectedCat}},{key:"handleCatChange",value:function(e){var t=this.queryCatColor(e);this.setState((function(n){return{selectedCat:e,categoryColor:t}}))}},{key:"queryCatColor",value:function(e){return n(34)("buttons[category="+e+"].color",{data:O}).value}},{key:"createCatButtons",value:function(e){return m.a.createElement("div",null,m.a.createElement(C.a,{className:"wat-buttongroup",vertical:!0,type:"radio",name:"categories",onChange:this.handleCatChange},e.buttons.map(this.createButton)))}},{key:"createButton",value:function(e){var t=e.category,n={backgroundColor:e.color,marginTop:"15px"};return m.a.createElement(f.a,{key:e.key,value:t,className:"wat-button",style:n,onMouseOver:this.handleHover,onMouseOut:this.handleHoverOut},t.toUpperCase())}},{key:"handleHover",value:function(e){var t=e.target.style.backgroundColor;this.setState((function(e){return{hovercolor:t}})),e.target.style.backgroundColor="lightslategrey"}},{key:"handleHoverOut",value:function(e){e.target.style.backgroundColor=this.state.hovercolor,this.setState((function(e){return{hovercolor:""}}))}},{key:"convertToBIO",value:function(){var e=Object(r.a)(o.a.mark((function e(){var t,n,a,r,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("wat-content").innerHTML,n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:t})},e.next=4,fetch("http://127.0.0.1:5000/converttobio",n);case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,l=r.result.map((function(e){return"\n"===e.token?"":e.token+" "+e.tag})),document.getElementById("bio-content").innerHTML=l.join("<br />");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"copyToClipBoard",value:function(){var e=document.createElement("textarea"),t=document.getElementById("bio-content").innerHTML;t=t.split("<br>").join("\n"),e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("BIO format data has been copied to the clipboard!")}},{key:"render",value:function(){return m.a.createElement("div",null,m.a.createElement(b.a,{bg:"success",variant:"dark",sticky:"top"},m.a.createElement(b.a.Brand,{href:"#"},m.a.createElement("img",{alt:"",src:"./logo.svg",width:"30",height:"30",className:"d-inline-block align-top"})," ","NER Annotation Tool")),m.a.createElement(g.a,{fluid:!0,className:"wat-container"},m.a.createElement(y.a,null,m.a.createElement(p.a,{sm:"5",md:"4",lg:"3",xl:"2"},m.a.createElement("label",null,"1. Select a document: "),m.a.createElement("input",{type:"file",className:"inputFile",name:"Select",onChange:this.readFiles}),m.a.createElement("div",null,m.a.createElement("br",null),m.a.createElement("label",null,"2. Select One PHI Categories: "),m.a.createElement(k,{data:this.state.btndata,handleCatChange:this.handleCatChange})),m.a.createElement("div",null,m.a.createElement("br",null),"3. Tag the entity words")),m.a.createElement(p.a,null,m.a.createElement("div",null,"Document: ",this.state.file_name),m.a.createElement("div",{id:"wat-content",className:"wat-textContent"})),m.a.createElement(p.a,{sm:"2",md:"2",lg:"2"},m.a.createElement(y.a,null,m.a.createElement(p.a,null,m.a.createElement("div",null,"BIO Format: ")),m.a.createElement(p.a,null,m.a.createElement("div",null,m.a.createElement(E.a,{variant:"link",className:"wat-link",onClick:this.copyToClipBoard},"Copy")))),m.a.createElement("div",{id:"bio-content",className:"wat-textContent wat-bioText"})))))}}]),a}(m.a.Component);v.a.render(m.a.createElement(w,null),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.d367deb2.chunk.js.map